{"ast":null,"code":"var _jsxFileName = \"/home/ck/compoundefi/client/src/components/recommendations/ExecutionFlow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useWalletContext } from '../../context/WalletContext';\nimport { useNotification } from '../../context/NotificationContext';\nimport Button from '../common/Button';\n\n/**\r\n * ExecutionFlow component for handling the transaction execution process\r\n * This component manages the user flow from strategy confirmation to execution completion\r\n * \r\n * @param {Object} props - Component props\r\n * @param {Object} props.recommendation - The recommendation object with allocation details\r\n * @param {Function} props.onComplete - Callback for when execution completes\r\n * @param {Function} props.onCancel - Callback for when user cancels execution\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExecutionFlow = ({\n  recommendation,\n  onComplete,\n  onCancel\n}) => {\n  _s();\n  // Execution flow states\n  const [step, setStep] = useState('confirm'); // confirm, executing, complete, error\n  const [progress, setProgress] = useState(0);\n  const [statusMessage, setStatusMessage] = useState('Preparing transactions...');\n  const [operations, setOperations] = useState([]);\n  const [currentOperationIndex, setCurrentOperationIndex] = useState(-1);\n  const [executionResults, setExecutionResults] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Execution state\n  const [executing, setExecuting] = useState(false);\n  const [confirmDisabled, setConfirmDisabled] = useState(false);\n\n  // Get wallet and notification context\n  const {\n    wallet,\n    isConnected,\n    executeTransaction\n  } = useWalletContext();\n  const {\n    showNotification\n  } = useNotification();\n\n  // Prepare operations from recommendation when component mounts\n  useEffect(() => {\n    if (recommendation && recommendation.allocation) {\n      const ops = prepareOperationsFromRecommendation(recommendation);\n      setOperations(ops);\n    }\n  }, [recommendation]);\n\n  /**\r\n   * Prepares transaction operations from the recommendation data\r\n   */\n  const prepareOperationsFromRecommendation = recommendationData => {\n    if (!(recommendationData !== null && recommendationData !== void 0 && recommendationData.allocation)) {\n      return [];\n    }\n\n    // Get contract addresses from constants or environment\n    const contractAddresses = {\n      amnis: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a\",\n      thala: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6\",\n      tortuga: \"0x952c1b1fc8eb75ee80f432c9d0a84fcda1d5c7481501a7eca9199f1596a60b53\",\n      ditto: \"0xd11107bdf0d6d7040c6c0bfbdecb6545191fdf13e8d8d259952f53e1713f61b5\",\n      aries: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3\",\n      pancakeswap: \"0xc7efb4076dbe143cbcd98cfaaa929ecfc8f299203dfff63b95ccb6bfe19850fa\",\n      cetus: \"0x27156bd56eb5637b9adde4d915b596f92d2f28f0ade2eaef48fa73e360e4e8a6\"\n    };\n\n    // Map recommendation allocations to operations\n    const operations = recommendationData.allocation.map(item => {\n      // Determine operation type based on product name\n      const type = determineOperationType(item.product || item.protocol);\n\n      // Get contract address (normalize protocol name to lowercase)\n      const protocolLower = item.protocol.toLowerCase();\n      const contractAddress = contractAddresses[protocolLower] || null;\n\n      // Skip if no contract address found\n      if (!contractAddress) {\n        console.warn(`No contract address found for protocol: ${item.protocol}`);\n        return null;\n      }\n\n      // Calculate amount if not explicitly provided\n      const amount = item.amount || (parseFloat(recommendationData.totalInvestment || 100) * parseFloat(item.percentage || 0) / 100).toFixed(2);\n\n      // Skip if amount is invalid\n      if (isNaN(parseFloat(amount)) || parseFloat(amount) <= 0) {\n        console.warn(`Invalid amount for ${item.protocol}: ${amount}`);\n        return null;\n      }\n      return {\n        protocol: item.protocol,\n        type,\n        amount,\n        contractAddress,\n        functionName: determineFunctionName(item.protocol, type),\n        expectedApr: parseFloat(item.expectedApr || 0)\n      };\n    }).filter(Boolean); // Remove null items\n\n    return operations;\n  };\n\n  /**\r\n   * Determines the operation type based on product name\r\n   */\n  const determineOperationType = product => {\n    if (!product) return 'stake';\n    const lower = typeof product === 'string' ? product.toLowerCase() : '';\n    if (lower.includes('stake') || lower.includes('apt')) {\n      return 'stake';\n    }\n    if (lower.includes('lend') || lower.includes('supply')) {\n      return 'lend';\n    }\n    if (lower.includes('liquidity') || lower.includes('pool')) {\n      return 'addLiquidity';\n    }\n    if (lower.includes('vault') || lower.includes('yield')) {\n      return 'deposit';\n    }\n    return 'stake'; // Default to staking\n  };\n\n  /**\r\n   * Determines the appropriate function name based on protocol and operation type\r\n   */\n  const determineFunctionName = (protocol, operationType) => {\n    var _functionMappings$pro;\n    const functionMappings = {\n      'amnis': {\n        'stake': '::staking::stake',\n        'unstake': '::staking::unstake'\n      },\n      'thala': {\n        'stake': '::staking::stake_apt',\n        'unstake': '::staking::unstake_apt'\n      },\n      'tortuga': {\n        'stake': '::staking::stake_apt',\n        'unstake': '::staking::unstake_apt'\n      },\n      'ditto': {\n        'stake': '::staking::stake',\n        'unstake': '::staking::unstake'\n      },\n      'aries': {\n        'lend': '::lending::supply',\n        'withdraw': '::lending::withdraw'\n      },\n      'cetus': {\n        'addLiquidity': '::pool::add_liquidity',\n        'removeLiquidity': '::pool::remove_liquidity'\n      },\n      'pancakeswap': {\n        'addLiquidity': '::router::add_liquidity',\n        'removeLiquidity': '::router::remove_liquidity'\n      }\n    };\n    const protocolLower = protocol.toLowerCase();\n    const operationLower = operationType.toLowerCase();\n\n    // If we have a specific mapping for this protocol and operation type, use it\n    if ((_functionMappings$pro = functionMappings[protocolLower]) !== null && _functionMappings$pro !== void 0 && _functionMappings$pro[operationLower]) {\n      return functionMappings[protocolLower][operationLower];\n    }\n\n    // Otherwise use general mappings\n    switch (operationLower) {\n      case 'stake':\n        return '::staking::stake';\n      case 'unstake':\n        return '::staking::unstake';\n      case 'lend':\n        return '::lending::supply';\n      case 'withdraw':\n        return '::lending::withdraw';\n      case 'addliquidity':\n        return '::router::add_liquidity';\n      case 'removeliquidity':\n        return '::router::remove_liquidity';\n      case 'deposit':\n        return '::yield::deposit';\n      default:\n        return `::${operationLower}::execute`;\n    }\n  };\n\n  /**\r\n   * Handles user confirmation to begin execution\r\n   */\n  const handleConfirm = async () => {\n    if (!isConnected) {\n      showNotification('Please connect your wallet first', 'error');\n      return;\n    }\n    if (operations.length === 0) {\n      showNotification('No valid operations to execute', 'error');\n      return;\n    }\n    setConfirmDisabled(true);\n    setStep('executing');\n\n    // Start execution process\n    try {\n      await executeStrategy();\n    } catch (error) {\n      console.error('Failed to start execution:', error);\n      setStep('error');\n      setError(error.message || 'Failed to initialize execution');\n      setConfirmDisabled(false);\n    }\n  };\n\n  /**\r\n   * Execute all operations in the strategy\r\n   */\n  const executeStrategy = async () => {\n    try {\n      setExecuting(true);\n      setProgress(5);\n      setStatusMessage('Starting strategy execution...');\n\n      // Track execution start for analytics\n      trackExecutionStart();\n      const results = {\n        success: true,\n        operations: [],\n        failedOperations: [],\n        startTime: Date.now()\n      };\n\n      // Execute operations sequentially\n      for (let i = 0; i < operations.length; i++) {\n        setCurrentOperationIndex(i);\n        const operation = operations[i];\n\n        // Update progress\n        const progressPerOp = 90 / operations.length;\n        setProgress(5 + i * progressPerOp);\n        setStatusMessage(`Executing ${operation.type} on ${operation.protocol}...`);\n        try {\n          // Create transaction payload\n          const amountInOctas = Math.floor(parseFloat(operation.amount) * 100000000).toString();\n          const txPayload = {\n            function: `${operation.contractAddress}${operation.functionName}`,\n            type_arguments: [],\n            arguments: [amountInOctas]\n          };\n\n          // Execute transaction\n          const txResult = await executeTransaction(txPayload);\n\n          // Add to successful operations\n          results.operations.push({\n            ...operation,\n            result: txResult,\n            status: 'success'\n          });\n\n          // Update progress\n          setProgress(5 + (i + 1) * progressPerOp);\n\n          // Show success notification\n          showNotification(`Successfully executed ${operation.type} on ${operation.protocol}`, 'success');\n\n          // Add delay between transactions\n          if (i < operations.length - 1) {\n            await new Promise(resolve => setTimeout(resolve, 1000));\n          }\n        } catch (error) {\n          console.error(`Operation failed: ${operation.type} on ${operation.protocol}`, error);\n\n          // Add to failed operations\n          results.failedOperations.push({\n            ...operation,\n            error: error.message,\n            status: 'failed'\n          });\n\n          // Show error notification\n          showNotification(`Failed to execute ${operation.type} on ${operation.protocol}: ${error.message}`, 'error');\n          results.success = false;\n\n          // Continue with next operation instead of aborting everything\n        }\n      }\n\n      // Finalize progress\n      setProgress(100);\n      setStatusMessage('Execution complete');\n\n      // Add final metrics\n      results.endTime = Date.now();\n      results.duration = results.endTime - results.startTime;\n      results.totalOperations = operations.length;\n      results.successfulOperations = results.operations.length;\n\n      // Update state\n      setExecutionResults(results);\n      setStep(results.success ? 'complete' : 'error');\n\n      // Show final notification\n      showNotification(results.success ? `Strategy executed successfully! ${results.operations.length} operations completed.` : `Strategy execution completed with ${results.failedOperations.length} failures.`, results.success ? 'success' : 'warning');\n\n      // If complete callback provided, call it\n      if (onComplete) {\n        onComplete(results);\n      }\n      return results;\n    } catch (error) {\n      console.error('Strategy execution error:', error);\n      setStep('error');\n      setStatusMessage(`Execution failed: ${error.message}`);\n      setError(error.message || 'Unknown execution error');\n      showNotification(`Strategy execution failed: ${error.message}`, 'error');\n      return {\n        success: false,\n        error: error.message\n      };\n    } finally {\n      setExecuting(false);\n    }\n  };\n\n  /**\r\n   * Track execution start for analytics\r\n   */\n  const trackExecutionStart = () => {\n    // Implement analytics tracking if needed\n    console.log('Strategy execution started:', recommendation.title || 'AI Strategy');\n  };\n\n  /**\r\n   * Handle cancel button click\r\n   */\n  const handleCancel = () => {\n    if (onCancel) {\n      onCancel();\n    }\n  };\n\n  /**\r\n   * Render UI for confirm step\r\n   */\n  const renderConfirmStep = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold text-gray-200\",\n        children: \"Confirm Strategy Execution\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-300\",\n        children: \"You are about to execute the following operations:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-h-60 overflow-y-auto bg-gray-800 rounded-md shadow p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b border-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left py-2 text-gray-400\",\n                children: \"Protocol\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left py-2 text-gray-400\",\n                children: \"Operation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-right py-2 text-gray-400\",\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-right py-2 text-gray-400\",\n                children: \"APR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: operations.map((op, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b border-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 font-medium text-white\",\n                children: op.protocol\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 capitalize text-white\",\n                children: op.type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 text-right text-white\",\n                children: [op.amount, \" APT\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 text-right text-green-400\",\n                children: [op.expectedApr, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-900/20 border border-yellow-800 rounded p-4 text-sm text-yellow-300\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Review the operations carefully. Once confirmed, transactions cannot be reverted.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-1\",\n              children: [\"You will need to sign \", operations.length, \" transaction\", operations.length !== 1 ? 's' : '', \" in your wallet.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: handleCancel,\n          disabled: confirmDisabled,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleConfirm,\n          disabled: confirmDisabled,\n          children: \"Confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }, this);\n  };\n\n  /**\r\n   * Render UI for executing step\r\n   */\n  const renderExecutingStep = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold text-gray-200\",\n        children: \"Executing Strategy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-400\",\n            children: \"Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-300\",\n            children: [Math.round(progress), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-gray-700 rounded-full h-2.5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out\",\n            style: {\n              width: `${progress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-400\",\n          children: statusMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: operations.map((op, index) => {\n          const isActive = index === currentOperationIndex;\n          const isComplete = index < currentOperationIndex;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-3 rounded-md border ${isActive ? 'border-blue-500 bg-blue-900/20' : isComplete ? 'border-green-500 bg-green-900/20' : 'border-gray-700'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-white\",\n                  children: op.protocol\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-400 ml-2 capitalize\",\n                  children: op.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-white\",\n                  children: [op.amount, \" APT\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 21\n                }, this), isComplete && /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-5 w-5 text-green-500\",\n                  fill: \"currentColor\",\n                  viewBox: \"0 0 20 20\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 23\n                }, this), isActive && /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-5 w-5 text-blue-500 animate-spin\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                    className: \"opacity-25\",\n                    cx: \"12\",\n                    cy: \"12\",\n                    r: \"10\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 489,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                    className: \"opacity-75\",\n                    fill: \"currentColor\",\n                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-sm text-gray-400\",\n        children: executing ? 'Please confirm transactions in your wallet when prompted' : 'Processing transactions...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this);\n  };\n\n  /**\r\n   * Render UI for complete step\r\n   */\n  const renderCompleteStep = () => {\n    if (!executionResults) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-900/30 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-8 w-8 text-green-500\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-200\",\n          children: \"Strategy Execution Completed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-300 mt-2\",\n          children: [executionResults.operations.length, \" operation\", executionResults.operations.length !== 1 ? 's' : '', \" completed successfully.\", executionResults.failedOperations.length > 0 && ` ${executionResults.failedOperations.length} operation${executionResults.failedOperations.length !== 1 ? 's' : ''} failed.`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 9\n      }, this), executionResults.failedOperations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-900/20 border border-yellow-800 rounded p-4 text-sm text-yellow-300\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Some operations failed to execute. You may want to try them again later.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-900/20 border border-green-800 rounded p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-medium text-green-400 mb-2\",\n          children: \"Your portfolio has been optimized\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-300 text-sm\",\n          children: \"Your assets are now allocated according to the recommended strategy. CompounDefi will continue to monitor market conditions and suggest adjustments when needed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: onComplete,\n          children: \"View Updated Portfolio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 7\n    }, this);\n  };\n\n  /**\r\n   * Render UI for error step\r\n   */\n  const renderErrorStep = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-900/30 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-8 w-8 text-red-500\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-200\",\n          children: \"Strategy Execution Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-300 mt-2\",\n          children: error || statusMessage || 'There was an error executing the strategy.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-900/20 border border-red-800 rounded p-4 text-sm text-red-300\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-red-500 mr-2 flex-shrink-0\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"The execution was interrupted or failed to complete. Possible reasons:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc pl-5 mt-1 space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Transaction rejected in wallet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Insufficient balance for gas fees\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Network congestion or timeout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 639,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Contract execution error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: handleCancel,\n          children: \"Back to Recommendations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => {\n            setStep('confirm');\n            setConfirmDisabled(false);\n            setProgress(0);\n            setStatusMessage('Preparing transactions...');\n            setError(null);\n          },\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Render component based on current step\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 rounded-lg shadow-lg p-6 max-w-3xl w-full border border-gray-700\",\n    children: [step === 'confirm' && renderConfirmStep(), step === 'executing' && renderExecutingStep(), step === 'complete' && renderCompleteStep(), step === 'error' && renderErrorStep()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 669,\n    columnNumber: 5\n  }, this);\n};\n_s(ExecutionFlow, \"Oe7VYKUBXearl/QQhK6uKmDxI/4=\", false, function () {\n  return [useWalletContext, useNotification];\n});\n_c = ExecutionFlow;\nexport default ExecutionFlow;\nvar _c;\n$RefreshReg$(_c, \"ExecutionFlow\");","map":{"version":3,"names":["React","useState","useEffect","useWalletContext","useNotification","Button","jsxDEV","_jsxDEV","ExecutionFlow","recommendation","onComplete","onCancel","_s","step","setStep","progress","setProgress","statusMessage","setStatusMessage","operations","setOperations","currentOperationIndex","setCurrentOperationIndex","executionResults","setExecutionResults","error","setError","executing","setExecuting","confirmDisabled","setConfirmDisabled","wallet","isConnected","executeTransaction","showNotification","allocation","ops","prepareOperationsFromRecommendation","recommendationData","contractAddresses","amnis","thala","tortuga","ditto","aries","pancakeswap","cetus","map","item","type","determineOperationType","product","protocol","protocolLower","toLowerCase","contractAddress","console","warn","amount","parseFloat","totalInvestment","percentage","toFixed","isNaN","functionName","determineFunctionName","expectedApr","filter","Boolean","lower","includes","operationType","_functionMappings$pro","functionMappings","operationLower","handleConfirm","length","executeStrategy","message","trackExecutionStart","results","success","failedOperations","startTime","Date","now","i","operation","progressPerOp","amountInOctas","Math","floor","toString","txPayload","function","type_arguments","arguments","txResult","push","result","status","Promise","resolve","setTimeout","endTime","duration","totalOperations","successfulOperations","log","title","handleCancel","renderConfirmStep","className","children","fileName","_jsxFileName","lineNumber","columnNumber","op","index","fill","viewBox","fillRule","d","clipRule","variant","onClick","disabled","renderExecutingStep","round","style","width","isActive","isComplete","xmlns","cx","cy","r","stroke","strokeWidth","renderCompleteStep","renderErrorStep","_c","$RefreshReg$"],"sources":["/home/ck/compoundefi/client/src/components/recommendations/ExecutionFlow.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useWalletContext } from '../../context/WalletContext';\r\nimport { useNotification } from '../../context/NotificationContext';\r\nimport Button from '../common/Button';\r\n\r\n/**\r\n * ExecutionFlow component for handling the transaction execution process\r\n * This component manages the user flow from strategy confirmation to execution completion\r\n * \r\n * @param {Object} props - Component props\r\n * @param {Object} props.recommendation - The recommendation object with allocation details\r\n * @param {Function} props.onComplete - Callback for when execution completes\r\n * @param {Function} props.onCancel - Callback for when user cancels execution\r\n */\r\nconst ExecutionFlow = ({ recommendation, onComplete, onCancel }) => {\r\n  // Execution flow states\r\n  const [step, setStep] = useState('confirm'); // confirm, executing, complete, error\r\n  const [progress, setProgress] = useState(0);\r\n  const [statusMessage, setStatusMessage] = useState('Preparing transactions...');\r\n  const [operations, setOperations] = useState([]);\r\n  const [currentOperationIndex, setCurrentOperationIndex] = useState(-1);\r\n  const [executionResults, setExecutionResults] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Execution state\r\n  const [executing, setExecuting] = useState(false);\r\n  const [confirmDisabled, setConfirmDisabled] = useState(false);\r\n  \r\n  // Get wallet and notification context\r\n  const { wallet, isConnected, executeTransaction } = useWalletContext();\r\n  const { showNotification } = useNotification();\r\n  \r\n  // Prepare operations from recommendation when component mounts\r\n  useEffect(() => {\r\n    if (recommendation && recommendation.allocation) {\r\n      const ops = prepareOperationsFromRecommendation(recommendation);\r\n      setOperations(ops);\r\n    }\r\n  }, [recommendation]);\r\n  \r\n  /**\r\n   * Prepares transaction operations from the recommendation data\r\n   */\r\n  const prepareOperationsFromRecommendation = (recommendationData) => {\r\n    if (!recommendationData?.allocation) {\r\n      return [];\r\n    }\r\n    \r\n    // Get contract addresses from constants or environment\r\n    const contractAddresses = {\r\n      amnis: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a\",\r\n      thala: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6\",\r\n      tortuga: \"0x952c1b1fc8eb75ee80f432c9d0a84fcda1d5c7481501a7eca9199f1596a60b53\",\r\n      ditto: \"0xd11107bdf0d6d7040c6c0bfbdecb6545191fdf13e8d8d259952f53e1713f61b5\",\r\n      aries: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3\",\r\n      pancakeswap: \"0xc7efb4076dbe143cbcd98cfaaa929ecfc8f299203dfff63b95ccb6bfe19850fa\",\r\n      cetus: \"0x27156bd56eb5637b9adde4d915b596f92d2f28f0ade2eaef48fa73e360e4e8a6\"\r\n    };\r\n    \r\n    // Map recommendation allocations to operations\r\n    const operations = recommendationData.allocation.map(item => {\r\n      // Determine operation type based on product name\r\n      const type = determineOperationType(item.product || item.protocol);\r\n      \r\n      // Get contract address (normalize protocol name to lowercase)\r\n      const protocolLower = item.protocol.toLowerCase();\r\n      const contractAddress = contractAddresses[protocolLower] || null;\r\n      \r\n      // Skip if no contract address found\r\n      if (!contractAddress) {\r\n        console.warn(`No contract address found for protocol: ${item.protocol}`);\r\n        return null;\r\n      }\r\n      \r\n      // Calculate amount if not explicitly provided\r\n      const amount = item.amount || \r\n        ((parseFloat(recommendationData.totalInvestment || 100) * parseFloat(item.percentage || 0) / 100).toFixed(2));\r\n      \r\n      // Skip if amount is invalid\r\n      if (isNaN(parseFloat(amount)) || parseFloat(amount) <= 0) {\r\n        console.warn(`Invalid amount for ${item.protocol}: ${amount}`);\r\n        return null;\r\n      }\r\n      \r\n      return {\r\n        protocol: item.protocol,\r\n        type,\r\n        amount,\r\n        contractAddress,\r\n        functionName: determineFunctionName(item.protocol, type),\r\n        expectedApr: parseFloat(item.expectedApr || 0)\r\n      };\r\n    }).filter(Boolean); // Remove null items\r\n    \r\n    return operations;\r\n  };\r\n  \r\n  /**\r\n   * Determines the operation type based on product name\r\n   */\r\n  const determineOperationType = (product) => {\r\n    if (!product) return 'stake';\r\n    \r\n    const lower = typeof product === 'string' ? product.toLowerCase() : '';\r\n    \r\n    if (lower.includes('stake') || lower.includes('apt')) {\r\n      return 'stake';\r\n    }\r\n    if (lower.includes('lend') || lower.includes('supply')) {\r\n      return 'lend';\r\n    }\r\n    if (lower.includes('liquidity') || lower.includes('pool')) {\r\n      return 'addLiquidity';\r\n    }\r\n    if (lower.includes('vault') || lower.includes('yield')) {\r\n      return 'deposit';\r\n    }\r\n    \r\n    return 'stake'; // Default to staking\r\n  };\r\n  \r\n  /**\r\n   * Determines the appropriate function name based on protocol and operation type\r\n   */\r\n  const determineFunctionName = (protocol, operationType) => {\r\n    const functionMappings = {\r\n      'amnis': { \r\n        'stake': '::staking::stake', \r\n        'unstake': '::staking::unstake'\r\n      },\r\n      'thala': { \r\n        'stake': '::staking::stake_apt', \r\n        'unstake': '::staking::unstake_apt'\r\n      },\r\n      'tortuga': { \r\n        'stake': '::staking::stake_apt', \r\n        'unstake': '::staking::unstake_apt'\r\n      },\r\n      'ditto': { \r\n        'stake': '::staking::stake', \r\n        'unstake': '::staking::unstake'\r\n      },\r\n      'aries': { \r\n        'lend': '::lending::supply', \r\n        'withdraw': '::lending::withdraw'\r\n      },\r\n      'cetus': { \r\n        'addLiquidity': '::pool::add_liquidity', \r\n        'removeLiquidity': '::pool::remove_liquidity'\r\n      },\r\n      'pancakeswap': { \r\n        'addLiquidity': '::router::add_liquidity', \r\n        'removeLiquidity': '::router::remove_liquidity'\r\n      }\r\n    };\r\n\r\n    const protocolLower = protocol.toLowerCase();\r\n    const operationLower = operationType.toLowerCase();\r\n\r\n    // If we have a specific mapping for this protocol and operation type, use it\r\n    if (functionMappings[protocolLower]?.[operationLower]) {\r\n      return functionMappings[protocolLower][operationLower];\r\n    }\r\n\r\n    // Otherwise use general mappings\r\n    switch (operationLower) {\r\n      case 'stake': return '::staking::stake';\r\n      case 'unstake': return '::staking::unstake';\r\n      case 'lend': return '::lending::supply';\r\n      case 'withdraw': return '::lending::withdraw';\r\n      case 'addliquidity': return '::router::add_liquidity';\r\n      case 'removeliquidity': return '::router::remove_liquidity';\r\n      case 'deposit': return '::yield::deposit';\r\n      default: return `::${operationLower}::execute`;\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * Handles user confirmation to begin execution\r\n   */\r\n  const handleConfirm = async () => {\r\n    if (!isConnected) {\r\n      showNotification('Please connect your wallet first', 'error');\r\n      return;\r\n    }\r\n    \r\n    if (operations.length === 0) {\r\n      showNotification('No valid operations to execute', 'error');\r\n      return;\r\n    }\r\n    \r\n    setConfirmDisabled(true);\r\n    setStep('executing');\r\n    \r\n    // Start execution process\r\n    try {\r\n      await executeStrategy();\r\n    } catch (error) {\r\n      console.error('Failed to start execution:', error);\r\n      setStep('error');\r\n      setError(error.message || 'Failed to initialize execution');\r\n      setConfirmDisabled(false);\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * Execute all operations in the strategy\r\n   */\r\n  const executeStrategy = async () => {\r\n    try {\r\n      setExecuting(true);\r\n      setProgress(5);\r\n      setStatusMessage('Starting strategy execution...');\r\n      \r\n      // Track execution start for analytics\r\n      trackExecutionStart();\r\n      \r\n      const results = {\r\n        success: true,\r\n        operations: [],\r\n        failedOperations: [],\r\n        startTime: Date.now()\r\n      };\r\n      \r\n      // Execute operations sequentially\r\n      for (let i = 0; i < operations.length; i++) {\r\n        setCurrentOperationIndex(i);\r\n        const operation = operations[i];\r\n        \r\n        // Update progress\r\n        const progressPerOp = 90 / operations.length;\r\n        setProgress(5 + (i * progressPerOp));\r\n        setStatusMessage(`Executing ${operation.type} on ${operation.protocol}...`);\r\n        \r\n        try {\r\n          // Create transaction payload\r\n          const amountInOctas = Math.floor(parseFloat(operation.amount) * 100000000).toString();\r\n          const txPayload = {\r\n            function: `${operation.contractAddress}${operation.functionName}`,\r\n            type_arguments: [],\r\n            arguments: [amountInOctas]\r\n          };\r\n          \r\n          // Execute transaction\r\n          const txResult = await executeTransaction(txPayload);\r\n          \r\n          // Add to successful operations\r\n          results.operations.push({\r\n            ...operation,\r\n            result: txResult,\r\n            status: 'success'\r\n          });\r\n          \r\n          // Update progress\r\n          setProgress(5 + ((i + 1) * progressPerOp));\r\n          \r\n          // Show success notification\r\n          showNotification(`Successfully executed ${operation.type} on ${operation.protocol}`, 'success');\r\n          \r\n          // Add delay between transactions\r\n          if (i < operations.length - 1) {\r\n            await new Promise(resolve => setTimeout(resolve, 1000));\r\n          }\r\n        } catch (error) {\r\n          console.error(`Operation failed: ${operation.type} on ${operation.protocol}`, error);\r\n          \r\n          // Add to failed operations\r\n          results.failedOperations.push({\r\n            ...operation,\r\n            error: error.message,\r\n            status: 'failed'\r\n          });\r\n          \r\n          // Show error notification\r\n          showNotification(`Failed to execute ${operation.type} on ${operation.protocol}: ${error.message}`, 'error');\r\n          \r\n          results.success = false;\r\n          \r\n          // Continue with next operation instead of aborting everything\r\n        }\r\n      }\r\n      \r\n      // Finalize progress\r\n      setProgress(100);\r\n      setStatusMessage('Execution complete');\r\n      \r\n      // Add final metrics\r\n      results.endTime = Date.now();\r\n      results.duration = results.endTime - results.startTime;\r\n      results.totalOperations = operations.length;\r\n      results.successfulOperations = results.operations.length;\r\n      \r\n      // Update state\r\n      setExecutionResults(results);\r\n      setStep(results.success ? 'complete' : 'error');\r\n      \r\n      // Show final notification\r\n      showNotification(\r\n        results.success \r\n          ? `Strategy executed successfully! ${results.operations.length} operations completed.` \r\n          : `Strategy execution completed with ${results.failedOperations.length} failures.`,\r\n        results.success ? 'success' : 'warning'\r\n      );\r\n      \r\n      // If complete callback provided, call it\r\n      if (onComplete) {\r\n        onComplete(results);\r\n      }\r\n      \r\n      return results;\r\n    } catch (error) {\r\n      console.error('Strategy execution error:', error);\r\n      \r\n      setStep('error');\r\n      setStatusMessage(`Execution failed: ${error.message}`);\r\n      setError(error.message || 'Unknown execution error');\r\n      \r\n      showNotification(`Strategy execution failed: ${error.message}`, 'error');\r\n      \r\n      return { success: false, error: error.message };\r\n    } finally {\r\n      setExecuting(false);\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * Track execution start for analytics\r\n   */\r\n  const trackExecutionStart = () => {\r\n    // Implement analytics tracking if needed\r\n    console.log('Strategy execution started:', recommendation.title || 'AI Strategy');\r\n  };\r\n  \r\n  /**\r\n   * Handle cancel button click\r\n   */\r\n  const handleCancel = () => {\r\n    if (onCancel) {\r\n      onCancel();\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * Render UI for confirm step\r\n   */\r\n  const renderConfirmStep = () => {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <h3 className=\"text-xl font-bold text-gray-200\">\r\n          Confirm Strategy Execution\r\n        </h3>\r\n\r\n        <p className=\"text-gray-300\">\r\n          You are about to execute the following operations:\r\n        </p>\r\n\r\n        <div className=\"max-h-60 overflow-y-auto bg-gray-800 rounded-md shadow p-4\">\r\n          <table className=\"min-w-full\">\r\n            <thead>\r\n              <tr className=\"border-b border-gray-700\">\r\n                <th className=\"text-left py-2 text-gray-400\">Protocol</th>\r\n                <th className=\"text-left py-2 text-gray-400\">Operation</th>\r\n                <th className=\"text-right py-2 text-gray-400\">Amount</th>\r\n                <th className=\"text-right py-2 text-gray-400\">APR</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {operations.map((op, index) => (\r\n                <tr key={index} className=\"border-b border-gray-700\">\r\n                  <td className=\"py-2 font-medium text-white\">{op.protocol}</td>\r\n                  <td className=\"py-2 capitalize text-white\">{op.type}</td>\r\n                  <td className=\"py-2 text-right text-white\">{op.amount} APT</td>\r\n                  <td className=\"py-2 text-right text-green-400\">{op.expectedApr}%</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"bg-yellow-900/20 border border-yellow-800 rounded p-4 text-sm text-yellow-300\">\r\n          <div className=\"flex\">\r\n            <svg\r\n              className=\"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <div>\r\n              <p>Review the operations carefully. Once confirmed, transactions cannot be reverted.</p>\r\n              <p className=\"mt-1\">You will need to sign {operations.length} transaction{operations.length !== 1 ? 's' : ''} in your wallet.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end space-x-4\">\r\n          <Button \r\n            variant=\"outline\" \r\n            onClick={handleCancel}\r\n            disabled={confirmDisabled}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button \r\n            variant=\"primary\" \r\n            onClick={handleConfirm}\r\n            disabled={confirmDisabled}\r\n          >\r\n            Confirm\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render UI for executing step\r\n   */\r\n  const renderExecutingStep = () => {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <h3 className=\"text-xl font-bold text-gray-200\">\r\n          Executing Strategy\r\n        </h3>\r\n\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex justify-between text-sm\">\r\n            <span className=\"text-gray-400\">Progress</span>\r\n            <span className=\"text-gray-300\">{Math.round(progress)}%</span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-700 rounded-full h-2.5\">\r\n            <div\r\n              className=\"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out\"\r\n              style={{ width: `${progress}%` }}\r\n            ></div>\r\n          </div>\r\n          <p className=\"text-sm text-gray-400\">{statusMessage}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          {operations.map((op, index) => {\r\n            const isActive = index === currentOperationIndex;\r\n            const isComplete = index < currentOperationIndex;\r\n            \r\n            return (\r\n              <div\r\n                key={index}\r\n                className={`p-3 rounded-md border ${\r\n                  isActive\r\n                    ? 'border-blue-500 bg-blue-900/20'\r\n                    : isComplete\r\n                    ? 'border-green-500 bg-green-900/20'\r\n                    : 'border-gray-700'\r\n                }`}\r\n              >\r\n                <div className=\"flex justify-between items-center\">\r\n                  <div>\r\n                    <span className=\"font-medium text-white\">{op.protocol}</span>\r\n                    <span className=\"text-sm text-gray-400 ml-2 capitalize\">\r\n                      {op.type}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span className=\"font-medium text-white\">{op.amount} APT</span>\r\n                    {isComplete && (\r\n                      <svg\r\n                        className=\"h-5 w-5 text-green-500\"\r\n                        fill=\"currentColor\"\r\n                        viewBox=\"0 0 20 20\"\r\n                      >\r\n                        <path\r\n                          fillRule=\"evenodd\"\r\n                          d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                          clipRule=\"evenodd\"\r\n                        />\r\n                      </svg>\r\n                    )}\r\n                    {isActive && (\r\n                      <svg\r\n                        className=\"h-5 w-5 text-blue-500 animate-spin\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        fill=\"none\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <circle\r\n                          className=\"opacity-25\"\r\n                          cx=\"12\"\r\n                          cy=\"12\"\r\n                          r=\"10\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"4\"\r\n                        ></circle>\r\n                        <path\r\n                          className=\"opacity-75\"\r\n                          fill=\"currentColor\"\r\n                          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                        ></path>\r\n                      </svg>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <p className=\"text-center text-sm text-gray-400\">\r\n          {executing\r\n            ? 'Please confirm transactions in your wallet when prompted'\r\n            : 'Processing transactions...'}\r\n        </p>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render UI for complete step\r\n   */\r\n  const renderCompleteStep = () => {\r\n    if (!executionResults) return null;\r\n    \r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-900/30 mb-4\">\r\n            <svg\r\n              className=\"h-8 w-8 text-green-500\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"text-xl font-bold text-gray-200\">\r\n            Strategy Execution Completed\r\n          </h3>\r\n          <p className=\"text-gray-300 mt-2\">\r\n            {executionResults.operations.length} operation{executionResults.operations.length !== 1 ? 's' : ''} completed successfully.\r\n            {executionResults.failedOperations.length > 0 && \r\n              ` ${executionResults.failedOperations.length} operation${executionResults.failedOperations.length !== 1 ? 's' : ''} failed.`\r\n            }\r\n          </p>\r\n        </div>\r\n\r\n        {executionResults.failedOperations.length > 0 && (\r\n          <div className=\"bg-yellow-900/20 border border-yellow-800 rounded p-4 text-sm text-yellow-300\">\r\n            <div className=\"flex\">\r\n              <svg\r\n                className=\"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0\"\r\n                fill=\"currentColor\"\r\n                viewBox=\"0 0 20 20\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\r\n                  clipRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n              <div>\r\n                <p>Some operations failed to execute. You may want to try them again later.</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"bg-green-900/20 border border-green-800 rounded p-4\">\r\n          <h4 className=\"font-medium text-green-400 mb-2\">\r\n            Your portfolio has been optimized\r\n          </h4>\r\n          <p className=\"text-green-300 text-sm\">\r\n            Your assets are now allocated according to the recommended strategy.\r\n            CompounDefi will continue to monitor market conditions and suggest adjustments when needed.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <Button variant=\"primary\" onClick={onComplete}>\r\n            View Updated Portfolio\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render UI for error step\r\n   */\r\n  const renderErrorStep = () => {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-900/30 mb-4\">\r\n            <svg\r\n              className=\"h-8 w-8 text-red-500\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"text-xl font-bold text-gray-200\">\r\n            Strategy Execution Failed\r\n          </h3>\r\n          <p className=\"text-gray-300 mt-2\">\r\n            {error || statusMessage || 'There was an error executing the strategy.'}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"bg-red-900/20 border border-red-800 rounded p-4 text-sm text-red-300\">\r\n          <div className=\"flex\">\r\n            <svg\r\n              className=\"h-5 w-5 text-red-500 mr-2 flex-shrink-0\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <div>\r\n              <p>The execution was interrupted or failed to complete. Possible reasons:</p>\r\n              <ul className=\"list-disc pl-5 mt-1 space-y-1\">\r\n                <li>Transaction rejected in wallet</li>\r\n                <li>Insufficient balance for gas fees</li>\r\n                <li>Network congestion or timeout</li>\r\n                <li>Contract execution error</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-center space-x-4\">\r\n          <Button variant=\"outline\" onClick={handleCancel}>\r\n            Back to Recommendations\r\n          </Button>\r\n          <Button\r\n            variant=\"primary\"\r\n            onClick={() => {\r\n              setStep('confirm');\r\n              setConfirmDisabled(false);\r\n              setProgress(0);\r\n              setStatusMessage('Preparing transactions...');\r\n              setError(null);\r\n            }}\r\n          >\r\n            Try Again\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Render component based on current step\r\n  return (\r\n    <div className=\"bg-gray-800 rounded-lg shadow-lg p-6 max-w-3xl w-full border border-gray-700\">\r\n      {step === 'confirm' && renderConfirmStep()}\r\n      {step === 'executing' && renderExecutingStep()}\r\n      {step === 'complete' && renderCompleteStep()}\r\n      {step === 'error' && renderErrorStep()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExecutionFlow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}