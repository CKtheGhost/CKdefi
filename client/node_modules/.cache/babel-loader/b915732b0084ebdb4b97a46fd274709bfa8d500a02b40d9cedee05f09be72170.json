{"ast":null,"code":"var _jsxFileName = \"/home/ck/compoundefi/client/src/components/recommendations/ExecutionFlow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from 'react';\nimport { WalletContext } from '../../context/WalletContext';\nimport { TransactionContext } from '../../context/TransactionContext';\nimport { NotificationContext } from '../../context/NotificationContext';\nimport { formatCurrency, formatNumber } from '../../utils/formatters';\nimport { showToast } from '../../utils/animations';\nimport { trackTransaction } from '../../utils/analyticsUtils';\nimport Button from '../common/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExecutionFlow = ({\n  recommendation,\n  onComplete,\n  onCancel\n}) => {\n  _s();\n  const [step, setStep] = useState('confirm'); // confirm, executing, complete, error\n  const [progress, setProgress] = useState(0);\n  const [statusMessage, setStatusMessage] = useState('Preparing transactions...');\n  const [operations, setOperations] = useState([]);\n  const [executing, setExecuting] = useState(false);\n  const [executionResults, setExecutionResults] = useState(null);\n  const [currentOperationIndex, setCurrentOperationIndex] = useState(-1);\n  const [confirmDisabled, setConfirmDisabled] = useState(false);\n  const {\n    isConnected,\n    address,\n    executeTransaction\n  } = useContext(WalletContext);\n  const {\n    showNotification\n  } = useContext(NotificationContext);\n  const {\n    executeStrategyTransaction,\n    addTransaction\n  } = useContext(TransactionContext);\n\n  // Prepare operations from recommendation\n  useEffect(() => {\n    if (recommendation && recommendation.allocation) {\n      const ops = prepareOperationsFromRecommendation(recommendation);\n      setOperations(ops);\n    }\n  }, [recommendation]);\n\n  // Function to prepare operations\n  const prepareOperationsFromRecommendation = recommendationData => {\n    if (!(recommendationData !== null && recommendationData !== void 0 && recommendationData.allocation)) {\n      return [];\n    }\n\n    // Get contract addresses from constants.js\n    const contractAddresses = window.contractAddresses || {\n      amnis: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a\",\n      thala: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6\",\n      tortuga: \"0x952c1b1fc8eb75ee80f432c9d0a84fcda1d5c7481501a7eca9199f1596a60b53\",\n      ditto: \"0xd11107bdf0d6d7040c6c0bfbdecb6545191fdf13e8d8d259952f53e1713f61b5\",\n      aries: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3\",\n      echo: \"0xeab7ea4d635b6b6add79d5045c4a45d8148d88287b1cfa1c3b6a4b56f46839ed\",\n      pancakeswap: \"0xc7efb4076dbe143cbcd98cfaaa929ecfc8f299203dfff63b95ccb6bfe19850fa\",\n      liquidswap: \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12\",\n      cetus: \"0x27156bd56eb5637b9adde4d915b596f92d2f28f0ade2eaef48fa73e360e4e8a6\"\n    };\n    const operations = recommendationData.allocation.map(item => {\n      // Determine operation type\n      const type = determineOperationType(item.product);\n\n      // Get contract address (normalize protocol name to lowercase)\n      const protocolLower = item.protocol.toLowerCase();\n      const contractAddress = contractAddresses[protocolLower] || null;\n\n      // If no contract address, skip this allocation\n      if (!contractAddress) {\n        console.warn(`No contract address found for protocol: ${item.protocol}`);\n        return null;\n      }\n\n      // Calculate amount if not explicitly provided\n      const amount = item.amount || (parseFloat(recommendationData.totalInvestment || 100) * parseFloat(item.percentage || 0) / 100).toFixed(2);\n\n      // Skip if amount is invalid\n      if (isNaN(parseFloat(amount)) || parseFloat(amount) <= 0) {\n        console.warn(`Invalid amount for ${item.protocol}: ${amount}`);\n        return null;\n      }\n      return {\n        protocol: item.protocol,\n        type,\n        amount,\n        contractAddress,\n        functionName: determineFunctionName(item.protocol, type),\n        expectedApr: parseFloat(item.expectedApr || 0)\n      };\n    }).filter(Boolean); // Remove null items\n\n    return operations;\n  };\n  const determineOperationType = product => {\n    if (!product) return 'stake';\n    const lower = product.toLowerCase();\n    if (lower.includes('stake') || lower.includes('stapt') || lower.includes('tapt')) {\n      return 'stake';\n    }\n    if (lower.includes('lend') || lower.includes('lending')) {\n      return 'lend';\n    }\n    if (lower.includes('liquidity') || lower.includes('amm') || lower.includes('pool')) {\n      return 'addLiquidity';\n    }\n    if (lower.includes('vault') || lower.includes('yield')) {\n      return 'deposit';\n    }\n    return 'stake'; // Default to staking\n  };\n  const determineFunctionName = (protocol, operationType) => {\n    var _functionMappings$pro;\n    const functionMappings = {\n      'amnis': {\n        'stake': '::staking::stake',\n        'unstake': '::staking::unstake',\n        'lend': '::lending::supply',\n        'withdraw': '::lending::withdraw',\n        'addLiquidity': '::router::add_liquidity',\n        'removeLiquidity': '::router::remove_liquidity'\n      },\n      'thala': {\n        'stake': '::staking::stake_apt',\n        'unstake': '::staking::unstake_apt',\n        'lend': '::lending::supply_apt',\n        'withdraw': '::lending::withdraw_apt',\n        'addLiquidity': '::router::add_liquidity',\n        'removeLiquidity': '::router::remove_liquidity'\n      },\n      'tortuga': {\n        'stake': '::staking::stake_apt',\n        'unstake': '::staking::unstake_apt'\n      },\n      'echo': {\n        'lend': '::lending::supply',\n        'withdraw': '::lending::withdraw'\n      },\n      'ditto': {\n        'stake': '::staking::stake',\n        'unstake': '::staking::unstake'\n      },\n      'aries': {\n        'lend': '::lending::supply',\n        'withdraw': '::lending::withdraw'\n      },\n      'cetus': {\n        'addLiquidity': '::pool::add_liquidity',\n        'removeLiquidity': '::pool::remove_liquidity'\n      },\n      'pancakeswap': {\n        'addLiquidity': '::router::add_liquidity',\n        'removeLiquidity': '::router::remove_liquidity',\n        'swap': '::router::swap_exact_input'\n      },\n      'liquidswap': {\n        'addLiquidity': '::router::add_liquidity',\n        'removeLiquidity': '::router::remove_liquidity'\n      }\n    };\n    const protocolLower = protocol.toLowerCase();\n    const operationLower = operationType.toLowerCase();\n\n    // If we have a specific mapping for this protocol and operation type, use it\n    if ((_functionMappings$pro = functionMappings[protocolLower]) !== null && _functionMappings$pro !== void 0 && _functionMappings$pro[operationLower]) {\n      return functionMappings[protocolLower][operationLower];\n    }\n\n    // Otherwise use general mappings\n    switch (operationLower) {\n      case 'stake':\n        return '::staking::stake';\n      case 'unstake':\n        return '::staking::unstake';\n      case 'lend':\n        return '::lending::supply';\n      case 'withdraw':\n        return '::lending::withdraw';\n      case 'addliquidity':\n        return '::router::add_liquidity';\n      case 'removeliquidity':\n        return '::router::remove_liquidity';\n      case 'deposit':\n        return '::yield::deposit';\n      default:\n        return `::${operationLower}::execute`;\n    }\n  };\n\n  // Handle confirmation and begin execution\n  const handleConfirm = async () => {\n    if (!isConnected) {\n      showToast({\n        message: 'Please connect your wallet first',\n        type: 'error',\n        duration: 3000\n      });\n      return;\n    }\n    if (operations.length === 0) {\n      showToast({\n        message: 'No valid operations to execute',\n        type: 'error',\n        duration: 3000\n      });\n      return;\n    }\n    setConfirmDisabled(true);\n    setStep('executing');\n    await executeStrategy();\n  };\n\n  // Execute all operations in the strategy\n  const executeStrategy = async () => {\n    try {\n      setExecuting(true);\n      setProgress(5);\n      setStatusMessage('Starting strategy execution...');\n\n      // Track execution start\n      trackTransaction('strategy', recommendation.title || 'AI Strategy', recommendation.amount || '0', true);\n      const results = {\n        success: true,\n        operations: [],\n        failedOperations: [],\n        startTime: Date.now()\n      };\n\n      // Execute operations sequentially\n      for (let i = 0; i < operations.length; i++) {\n        setCurrentOperationIndex(i);\n        const operation = operations[i];\n\n        // Update progress\n        const progressPerOp = 90 / operations.length;\n        setProgress(5 + i * progressPerOp);\n        setStatusMessage(`Executing ${operation.type} on ${operation.protocol}...`);\n        try {\n          // Create transaction payload\n          const amountInOctas = Math.floor(parseFloat(operation.amount) * 100000000).toString();\n          const txPayload = {\n            function: `${operation.contractAddress}${operation.functionName}`,\n            type_arguments: [],\n            arguments: [amountInOctas]\n          };\n\n          // Execute transaction\n          const txResult = await executeTransaction(txPayload);\n\n          // Add to successful operations\n          results.operations.push({\n            ...operation,\n            result: txResult,\n            status: 'success'\n          });\n\n          // Update progress\n          setProgress(5 + (i + 1) * progressPerOp);\n\n          // Track individual transaction\n          trackTransaction(operation.type, operation.protocol, operation.amount, true);\n\n          // Show success notification\n          showToast({\n            message: `Successfully executed ${operation.type} on ${operation.protocol}`,\n            type: 'success',\n            duration: 3000\n          });\n\n          // Add delay between transactions\n          if (i < operations.length - 1) {\n            await new Promise(resolve => setTimeout(resolve, 1000));\n          }\n        } catch (error) {\n          console.error(`Operation failed: ${operation.type} on ${operation.protocol}`, error);\n\n          // Add to failed operations\n          results.failedOperations.push({\n            ...operation,\n            error: error.message,\n            status: 'failed'\n          });\n\n          // Track failed transaction\n          trackTransaction(operation.type, operation.protocol, operation.amount, false, error.message);\n\n          // Show error notification\n          showToast({\n            message: `Failed to execute ${operation.type} on ${operation.protocol}: ${error.message}`,\n            type: 'error',\n            duration: 5000\n          });\n          results.success = false;\n\n          // Continue with next operation instead of aborting everything\n        }\n      }\n\n      // Finalize progress\n      setProgress(100);\n      setStatusMessage('Execution complete');\n\n      // Add final metrics\n      results.endTime = Date.now();\n      results.duration = results.endTime - results.startTime;\n      results.totalOperations = operations.length;\n      results.successfulOperations = results.operations.length;\n\n      // Update state\n      setExecutionResults(results);\n      setStep(results.success ? 'complete' : 'error');\n\n      // Show final notification\n      showToast({\n        message: results.success ? `Strategy executed successfully! ${results.operations.length} operations completed.` : `Strategy execution completed with ${results.failedOperations.length} failures.`,\n        type: results.success ? 'success' : 'warning',\n        duration: 5000\n      });\n\n      // If complete callback provided, call it\n      if (onComplete) {\n        onComplete(results);\n      }\n      return results;\n    } catch (error) {\n      console.error('Strategy execution error:', error);\n      setStep('error');\n      setStatusMessage(`Execution failed: ${error.message}`);\n      showToast({\n        message: `Strategy execution failed: ${error.message}`,\n        type: 'error',\n        duration: 5000\n      });\n      return {\n        success: false,\n        error: error.message\n      };\n    } finally {\n      setExecuting(false);\n    }\n  };\n\n  // Handle cancel\n  const handleCancel = () => {\n    if (onCancel) {\n      onCancel();\n    }\n  };\n\n  // Render UI based on current step\n  const renderConfirmStep = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold text-gray-800 dark:text-white\",\n        children: \"Confirm Strategy Execution\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 dark:text-gray-300\",\n        children: \"You are about to execute the following operations:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-h-60 overflow-y-auto bg-white dark:bg-gray-900 rounded-md shadow p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b dark:border-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left py-2\",\n                children: \"Protocol\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left py-2\",\n                children: \"Operation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-right py-2\",\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-right py-2\",\n                children: \"APR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: operations.map((op, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b dark:border-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 font-medium\",\n                children: op.protocol\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 capitalize\",\n                children: op.type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 text-right\",\n                children: [op.amount, \" APT\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 text-right text-green-600\",\n                children: [op.expectedApr, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-4 text-sm text-yellow-800 dark:text-yellow-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Review the operations carefully. Once confirmed, transactions cannot be reverted.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-1\",\n              children: [\"You will need to sign \", operations.length, \" transaction\", operations.length !== 1 ? 's' : '', \" in your wallet.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: handleCancel,\n          disabled: confirmDisabled,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleConfirm,\n          disabled: confirmDisabled,\n          children: \"Confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this);\n  };\n  const renderExecutingStep = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold text-gray-800 dark:text-white\",\n        children: \"Executing Strategy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 dark:text-gray-400\",\n            children: \"Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-800 dark:text-gray-200\",\n            children: [progress, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out\",\n            style: {\n              width: `${progress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 dark:text-gray-400\",\n          children: statusMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: operations.map((op, index) => {\n          const isActive = index === currentOperationIndex;\n          const isComplete = index < currentOperationIndex;\n          const isPending = index > currentOperationIndex;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-3 rounded-md border ${isActive ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20' : isComplete ? 'border-green-500 bg-green-50 dark:bg-green-900/20' : 'border-gray-200 dark:border-gray-700'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: op.protocol\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-600 dark:text-gray-400 ml-2 capitalize\",\n                  children: op.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: [op.amount, \" APT\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 21\n                }, this), isComplete && /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-5 w-5 text-green-500\",\n                  fill: \"currentColor\",\n                  viewBox: \"0 0 20 20\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 23\n                }, this), isActive && /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"h-5 w-5 text-blue-500 animate-spin\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                    className: \"opacity-25\",\n                    cx: \"12\",\n                    cy: \"12\",\n                    r: \"10\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 489,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                    className: \"opacity-75\",\n                    fill: \"currentColor\",\n                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-sm text-gray-600 dark:text-gray-400\",\n        children: executing ? 'Please confirm transactions in your wallet' : 'Processing transactions...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this);\n  };\n  const renderCompleteStep = () => {\n    if (!executionResults) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-8 w-8 text-green-600 dark:text-green-400\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-800 dark:text-white\",\n          children: \"Strategy Execution Completed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 dark:text-gray-300 mt-2\",\n          children: [executionResults.operations.length, \" operation\", executionResults.operations.length !== 1 ? 's' : '', \" completed successfully.\", executionResults.failedOperations.length > 0 && ` ${executionResults.failedOperations.length} operation${executionResults.failedOperations.length !== 1 ? 's' : ''} failed.`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 9\n      }, this), executionResults.failedOperations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-4 text-sm text-yellow-800 dark:text-yellow-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Some operations failed to execute. You may want to try them again later.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-medium text-green-800 dark:text-green-200 mb-2\",\n          children: \"Your portfolio has been optimized\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-700 dark:text-green-300 text-sm\",\n          children: \"Your assets are now allocated according to the recommended strategy. CompounDefi will continue to monitor market conditions and suggest adjustments when needed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: onComplete,\n          children: \"View Updated Portfolio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 7\n    }, this);\n  };\n  const renderErrorStep = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-8 w-8 text-red-600 dark:text-red-400\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-800 dark:text-white\",\n          children: \"Strategy Execution Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 dark:text-gray-300 mt-2\",\n          children: statusMessage || 'There was an error executing the strategy.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-4 text-sm text-red-800 dark:text-red-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"h-5 w-5 text-red-400 mr-2 flex-shrink-0\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"The execution was interrupted or failed to complete. Possible reasons:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc pl-5 mt-1 space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Transaction rejected in wallet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 631,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Insufficient balance for gas fees\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Network congestion or timeout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Contract execution error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: handleCancel,\n          children: \"Back to Recommendations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => {\n            setStep('confirm');\n            setConfirmDisabled(false);\n            setProgress(0);\n            setStatusMessage('Preparing transactions...');\n          },\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 max-w-3xl w-full\",\n    children: [step === 'confirm' && renderConfirmStep(), step === 'executing' && renderExecutingStep(), step === 'complete' && renderCompleteStep(), step === 'error' && renderErrorStep()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 661,\n    columnNumber: 5\n  }, this);\n};\n_s(ExecutionFlow, \"rqpiKbuvaq51/MfRm6d/gC2yNRE=\");\n_c = ExecutionFlow;\nexport default ExecutionFlow;\nvar _c;\n$RefreshReg$(_c, \"ExecutionFlow\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","WalletContext","TransactionContext","NotificationContext","formatCurrency","formatNumber","showToast","trackTransaction","Button","jsxDEV","_jsxDEV","ExecutionFlow","recommendation","onComplete","onCancel","_s","step","setStep","progress","setProgress","statusMessage","setStatusMessage","operations","setOperations","executing","setExecuting","executionResults","setExecutionResults","currentOperationIndex","setCurrentOperationIndex","confirmDisabled","setConfirmDisabled","isConnected","address","executeTransaction","showNotification","executeStrategyTransaction","addTransaction","allocation","ops","prepareOperationsFromRecommendation","recommendationData","contractAddresses","window","amnis","thala","tortuga","ditto","aries","echo","pancakeswap","liquidswap","cetus","map","item","type","determineOperationType","product","protocolLower","protocol","toLowerCase","contractAddress","console","warn","amount","parseFloat","totalInvestment","percentage","toFixed","isNaN","functionName","determineFunctionName","expectedApr","filter","Boolean","lower","includes","operationType","_functionMappings$pro","functionMappings","operationLower","handleConfirm","message","duration","length","executeStrategy","title","results","success","failedOperations","startTime","Date","now","i","operation","progressPerOp","amountInOctas","Math","floor","toString","txPayload","function","type_arguments","arguments","txResult","push","result","status","Promise","resolve","setTimeout","error","endTime","totalOperations","successfulOperations","handleCancel","renderConfirmStep","className","children","fileName","_jsxFileName","lineNumber","columnNumber","op","index","fill","viewBox","fillRule","d","clipRule","variant","onClick","disabled","renderExecutingStep","style","width","isActive","isComplete","isPending","xmlns","cx","cy","r","stroke","strokeWidth","renderCompleteStep","renderErrorStep","_c","$RefreshReg$"],"sources":["/home/ck/compoundefi/client/src/components/recommendations/ExecutionFlow.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from 'react';\r\nimport { WalletContext } from '../../context/WalletContext';\r\nimport { TransactionContext } from '../../context/TransactionContext';\r\nimport { NotificationContext } from '../../context/NotificationContext';\r\nimport { formatCurrency, formatNumber } from '../../utils/formatters';\r\nimport { showToast } from '../../utils/animations';\r\nimport { trackTransaction } from '../../utils/analyticsUtils';\r\nimport Button from '../common/Button';\r\n\r\nconst ExecutionFlow = ({ recommendation, onComplete, onCancel }) => {\r\n  const [step, setStep] = useState('confirm'); // confirm, executing, complete, error\r\n  const [progress, setProgress] = useState(0);\r\n  const [statusMessage, setStatusMessage] = useState('Preparing transactions...');\r\n  const [operations, setOperations] = useState([]);\r\n  const [executing, setExecuting] = useState(false);\r\n  const [executionResults, setExecutionResults] = useState(null);\r\n  const [currentOperationIndex, setCurrentOperationIndex] = useState(-1);\r\n  const [confirmDisabled, setConfirmDisabled] = useState(false);\r\n\r\n  const { isConnected, address, executeTransaction } = useContext(WalletContext);\r\n  const { showNotification } = useContext(NotificationContext);\r\n  const { executeStrategyTransaction, addTransaction } = useContext(TransactionContext);\r\n\r\n  // Prepare operations from recommendation\r\n  useEffect(() => {\r\n    if (recommendation && recommendation.allocation) {\r\n      const ops = prepareOperationsFromRecommendation(recommendation);\r\n      setOperations(ops);\r\n    }\r\n  }, [recommendation]);\r\n\r\n  // Function to prepare operations\r\n  const prepareOperationsFromRecommendation = (recommendationData) => {\r\n    if (!recommendationData?.allocation) {\r\n      return [];\r\n    }\r\n    \r\n    // Get contract addresses from constants.js\r\n    const contractAddresses = window.contractAddresses || {\r\n      amnis: \"0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a\",\r\n      thala: \"0xfaf4e633ae9eb31366c9ca24214231760926576c7b625313b3688b5e900731f6\",\r\n      tortuga: \"0x952c1b1fc8eb75ee80f432c9d0a84fcda1d5c7481501a7eca9199f1596a60b53\",\r\n      ditto: \"0xd11107bdf0d6d7040c6c0bfbdecb6545191fdf13e8d8d259952f53e1713f61b5\",\r\n      aries: \"0x9770fa9c725cbd97eb50b2be5f7416efdfd1f1554beb0750d4dae4c64e860da3\",\r\n      echo: \"0xeab7ea4d635b6b6add79d5045c4a45d8148d88287b1cfa1c3b6a4b56f46839ed\",\r\n      pancakeswap: \"0xc7efb4076dbe143cbcd98cfaaa929ecfc8f299203dfff63b95ccb6bfe19850fa\",\r\n      liquidswap: \"0x190d44266241744264b964a37b8f09863167a12d3e70cda39376cfb4e3561e12\",\r\n      cetus: \"0x27156bd56eb5637b9adde4d915b596f92d2f28f0ade2eaef48fa73e360e4e8a6\"\r\n    };\r\n    \r\n    const operations = recommendationData.allocation.map(item => {\r\n      // Determine operation type\r\n      const type = determineOperationType(item.product);\r\n      \r\n      // Get contract address (normalize protocol name to lowercase)\r\n      const protocolLower = item.protocol.toLowerCase();\r\n      const contractAddress = contractAddresses[protocolLower] || null;\r\n      \r\n      // If no contract address, skip this allocation\r\n      if (!contractAddress) {\r\n        console.warn(`No contract address found for protocol: ${item.protocol}`);\r\n        return null;\r\n      }\r\n      \r\n      // Calculate amount if not explicitly provided\r\n      const amount = item.amount || \r\n        ((parseFloat(recommendationData.totalInvestment || 100) * parseFloat(item.percentage || 0) / 100).toFixed(2));\r\n      \r\n      // Skip if amount is invalid\r\n      if (isNaN(parseFloat(amount)) || parseFloat(amount) <= 0) {\r\n        console.warn(`Invalid amount for ${item.protocol}: ${amount}`);\r\n        return null;\r\n      }\r\n      \r\n      return {\r\n        protocol: item.protocol,\r\n        type,\r\n        amount,\r\n        contractAddress,\r\n        functionName: determineFunctionName(item.protocol, type),\r\n        expectedApr: parseFloat(item.expectedApr || 0)\r\n      };\r\n    }).filter(Boolean); // Remove null items\r\n    \r\n    return operations;\r\n  };\r\n  \r\n  const determineOperationType = (product) => {\r\n    if (!product) return 'stake';\r\n    \r\n    const lower = product.toLowerCase();\r\n    \r\n    if (lower.includes('stake') || lower.includes('stapt') || lower.includes('tapt')) {\r\n      return 'stake';\r\n    }\r\n    if (lower.includes('lend') || lower.includes('lending')) {\r\n      return 'lend';\r\n    }\r\n    if (lower.includes('liquidity') || lower.includes('amm') || lower.includes('pool')) {\r\n      return 'addLiquidity';\r\n    }\r\n    if (lower.includes('vault') || lower.includes('yield')) {\r\n      return 'deposit';\r\n    }\r\n    \r\n    return 'stake'; // Default to staking\r\n  };\r\n  \r\n  const determineFunctionName = (protocol, operationType) => {\r\n    const functionMappings = {\r\n      'amnis': { \r\n        'stake': '::staking::stake', \r\n        'unstake': '::staking::unstake', \r\n        'lend': '::lending::supply', \r\n        'withdraw': '::lending::withdraw', \r\n        'addLiquidity': '::router::add_liquidity', \r\n        'removeLiquidity': '::router::remove_liquidity' \r\n      },\r\n      'thala': { \r\n        'stake': '::staking::stake_apt', \r\n        'unstake': '::staking::unstake_apt', \r\n        'lend': '::lending::supply_apt', \r\n        'withdraw': '::lending::withdraw_apt', \r\n        'addLiquidity': '::router::add_liquidity', \r\n        'removeLiquidity': '::router::remove_liquidity' \r\n      },\r\n      'tortuga': { \r\n        'stake': '::staking::stake_apt', \r\n        'unstake': '::staking::unstake_apt' \r\n      },\r\n      'echo': { \r\n        'lend': '::lending::supply', \r\n        'withdraw': '::lending::withdraw' \r\n      },\r\n      'ditto': { \r\n        'stake': '::staking::stake', \r\n        'unstake': '::staking::unstake' \r\n      },\r\n      'aries': { \r\n        'lend': '::lending::supply', \r\n        'withdraw': '::lending::withdraw' \r\n      },\r\n      'cetus': { \r\n        'addLiquidity': '::pool::add_liquidity', \r\n        'removeLiquidity': '::pool::remove_liquidity' \r\n      },\r\n      'pancakeswap': { \r\n        'addLiquidity': '::router::add_liquidity', \r\n        'removeLiquidity': '::router::remove_liquidity', \r\n        'swap': '::router::swap_exact_input' \r\n      },\r\n      'liquidswap': { \r\n        'addLiquidity': '::router::add_liquidity', \r\n        'removeLiquidity': '::router::remove_liquidity' \r\n      }\r\n    };\r\n\r\n    const protocolLower = protocol.toLowerCase();\r\n    const operationLower = operationType.toLowerCase();\r\n\r\n    // If we have a specific mapping for this protocol and operation type, use it\r\n    if (functionMappings[protocolLower]?.[operationLower]) {\r\n      return functionMappings[protocolLower][operationLower];\r\n    }\r\n\r\n    // Otherwise use general mappings\r\n    switch (operationLower) {\r\n      case 'stake': return '::staking::stake';\r\n      case 'unstake': return '::staking::unstake';\r\n      case 'lend': return '::lending::supply';\r\n      case 'withdraw': return '::lending::withdraw';\r\n      case 'addliquidity': return '::router::add_liquidity';\r\n      case 'removeliquidity': return '::router::remove_liquidity';\r\n      case 'deposit': return '::yield::deposit';\r\n      default: return `::${operationLower}::execute`;\r\n    }\r\n  };\r\n  \r\n  // Handle confirmation and begin execution\r\n  const handleConfirm = async () => {\r\n    if (!isConnected) {\r\n      showToast({\r\n        message: 'Please connect your wallet first',\r\n        type: 'error',\r\n        duration: 3000\r\n      });\r\n      return;\r\n    }\r\n    \r\n    if (operations.length === 0) {\r\n      showToast({\r\n        message: 'No valid operations to execute',\r\n        type: 'error',\r\n        duration: 3000\r\n      });\r\n      return;\r\n    }\r\n    \r\n    setConfirmDisabled(true);\r\n    setStep('executing');\r\n    await executeStrategy();\r\n  };\r\n  \r\n  // Execute all operations in the strategy\r\n  const executeStrategy = async () => {\r\n    try {\r\n      setExecuting(true);\r\n      setProgress(5);\r\n      setStatusMessage('Starting strategy execution...');\r\n      \r\n      // Track execution start\r\n      trackTransaction('strategy', recommendation.title || 'AI Strategy', recommendation.amount || '0', true);\r\n      \r\n      const results = {\r\n        success: true,\r\n        operations: [],\r\n        failedOperations: [],\r\n        startTime: Date.now()\r\n      };\r\n      \r\n      // Execute operations sequentially\r\n      for (let i = 0; i < operations.length; i++) {\r\n        setCurrentOperationIndex(i);\r\n        const operation = operations[i];\r\n        \r\n        // Update progress\r\n        const progressPerOp = 90 / operations.length;\r\n        setProgress(5 + (i * progressPerOp));\r\n        setStatusMessage(`Executing ${operation.type} on ${operation.protocol}...`);\r\n        \r\n        try {\r\n          // Create transaction payload\r\n          const amountInOctas = Math.floor(parseFloat(operation.amount) * 100000000).toString();\r\n          const txPayload = {\r\n            function: `${operation.contractAddress}${operation.functionName}`,\r\n            type_arguments: [],\r\n            arguments: [amountInOctas]\r\n          };\r\n          \r\n          // Execute transaction\r\n          const txResult = await executeTransaction(txPayload);\r\n          \r\n          // Add to successful operations\r\n          results.operations.push({\r\n            ...operation,\r\n            result: txResult,\r\n            status: 'success'\r\n          });\r\n          \r\n          // Update progress\r\n          setProgress(5 + ((i + 1) * progressPerOp));\r\n          \r\n          // Track individual transaction\r\n          trackTransaction(operation.type, operation.protocol, operation.amount, true);\r\n          \r\n          // Show success notification\r\n          showToast({\r\n            message: `Successfully executed ${operation.type} on ${operation.protocol}`,\r\n            type: 'success',\r\n            duration: 3000\r\n          });\r\n          \r\n          // Add delay between transactions\r\n          if (i < operations.length - 1) {\r\n            await new Promise(resolve => setTimeout(resolve, 1000));\r\n          }\r\n        } catch (error) {\r\n          console.error(`Operation failed: ${operation.type} on ${operation.protocol}`, error);\r\n          \r\n          // Add to failed operations\r\n          results.failedOperations.push({\r\n            ...operation,\r\n            error: error.message,\r\n            status: 'failed'\r\n          });\r\n          \r\n          // Track failed transaction\r\n          trackTransaction(operation.type, operation.protocol, operation.amount, false, error.message);\r\n          \r\n          // Show error notification\r\n          showToast({\r\n            message: `Failed to execute ${operation.type} on ${operation.protocol}: ${error.message}`,\r\n            type: 'error',\r\n            duration: 5000\r\n          });\r\n          \r\n          results.success = false;\r\n          \r\n          // Continue with next operation instead of aborting everything\r\n        }\r\n      }\r\n      \r\n      // Finalize progress\r\n      setProgress(100);\r\n      setStatusMessage('Execution complete');\r\n      \r\n      // Add final metrics\r\n      results.endTime = Date.now();\r\n      results.duration = results.endTime - results.startTime;\r\n      results.totalOperations = operations.length;\r\n      results.successfulOperations = results.operations.length;\r\n      \r\n      // Update state\r\n      setExecutionResults(results);\r\n      setStep(results.success ? 'complete' : 'error');\r\n      \r\n      // Show final notification\r\n      showToast({\r\n        message: results.success \r\n          ? `Strategy executed successfully! ${results.operations.length} operations completed.` \r\n          : `Strategy execution completed with ${results.failedOperations.length} failures.`,\r\n        type: results.success ? 'success' : 'warning',\r\n        duration: 5000\r\n      });\r\n      \r\n      // If complete callback provided, call it\r\n      if (onComplete) {\r\n        onComplete(results);\r\n      }\r\n      \r\n      return results;\r\n    } catch (error) {\r\n      console.error('Strategy execution error:', error);\r\n      \r\n      setStep('error');\r\n      setStatusMessage(`Execution failed: ${error.message}`);\r\n      \r\n      showToast({\r\n        message: `Strategy execution failed: ${error.message}`,\r\n        type: 'error',\r\n        duration: 5000\r\n      });\r\n      \r\n      return { success: false, error: error.message };\r\n    } finally {\r\n      setExecuting(false);\r\n    }\r\n  };\r\n  \r\n  // Handle cancel\r\n  const handleCancel = () => {\r\n    if (onCancel) {\r\n      onCancel();\r\n    }\r\n  };\r\n  \r\n  // Render UI based on current step\r\n  const renderConfirmStep = () => {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <h3 className=\"text-xl font-bold text-gray-800 dark:text-white\">\r\n          Confirm Strategy Execution\r\n        </h3>\r\n\r\n        <p className=\"text-gray-600 dark:text-gray-300\">\r\n          You are about to execute the following operations:\r\n        </p>\r\n\r\n        <div className=\"max-h-60 overflow-y-auto bg-white dark:bg-gray-900 rounded-md shadow p-4\">\r\n          <table className=\"min-w-full\">\r\n            <thead>\r\n              <tr className=\"border-b dark:border-gray-700\">\r\n                <th className=\"text-left py-2\">Protocol</th>\r\n                <th className=\"text-left py-2\">Operation</th>\r\n                <th className=\"text-right py-2\">Amount</th>\r\n                <th className=\"text-right py-2\">APR</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {operations.map((op, index) => (\r\n                <tr key={index} className=\"border-b dark:border-gray-700\">\r\n                  <td className=\"py-2 font-medium\">{op.protocol}</td>\r\n                  <td className=\"py-2 capitalize\">{op.type}</td>\r\n                  <td className=\"py-2 text-right\">{op.amount} APT</td>\r\n                  <td className=\"py-2 text-right text-green-600\">{op.expectedApr}%</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-4 text-sm text-yellow-800 dark:text-yellow-200\">\r\n          <div className=\"flex\">\r\n            <svg\r\n              className=\"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <div>\r\n              <p>Review the operations carefully. Once confirmed, transactions cannot be reverted.</p>\r\n              <p className=\"mt-1\">You will need to sign {operations.length} transaction{operations.length !== 1 ? 's' : ''} in your wallet.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end space-x-4\">\r\n          <Button \r\n            variant=\"outline\" \r\n            onClick={handleCancel}\r\n            disabled={confirmDisabled}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button \r\n            variant=\"primary\" \r\n            onClick={handleConfirm}\r\n            disabled={confirmDisabled}\r\n          >\r\n            Confirm\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderExecutingStep = () => {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <h3 className=\"text-xl font-bold text-gray-800 dark:text-white\">\r\n          Executing Strategy\r\n        </h3>\r\n\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex justify-between text-sm\">\r\n            <span className=\"text-gray-600 dark:text-gray-400\">Progress</span>\r\n            <span className=\"text-gray-800 dark:text-gray-200\">{progress}%</span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\r\n            <div\r\n              className=\"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-in-out\"\r\n              style={{ width: `${progress}%` }}\r\n            ></div>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">{statusMessage}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          {operations.map((op, index) => {\r\n            const isActive = index === currentOperationIndex;\r\n            const isComplete = index < currentOperationIndex;\r\n            const isPending = index > currentOperationIndex;\r\n            \r\n            return (\r\n              <div\r\n                key={index}\r\n                className={`p-3 rounded-md border ${\r\n                  isActive\r\n                    ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\r\n                    : isComplete\r\n                    ? 'border-green-500 bg-green-50 dark:bg-green-900/20'\r\n                    : 'border-gray-200 dark:border-gray-700'\r\n                }`}\r\n              >\r\n                <div className=\"flex justify-between items-center\">\r\n                  <div>\r\n                    <span className=\"font-medium\">{op.protocol}</span>\r\n                    <span className=\"text-sm text-gray-600 dark:text-gray-400 ml-2 capitalize\">\r\n                      {op.type}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span className=\"font-medium\">{op.amount} APT</span>\r\n                    {isComplete && (\r\n                      <svg\r\n                        className=\"h-5 w-5 text-green-500\"\r\n                        fill=\"currentColor\"\r\n                        viewBox=\"0 0 20 20\"\r\n                      >\r\n                        <path\r\n                          fillRule=\"evenodd\"\r\n                          d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                          clipRule=\"evenodd\"\r\n                        />\r\n                      </svg>\r\n                    )}\r\n                    {isActive && (\r\n                      <svg\r\n                        className=\"h-5 w-5 text-blue-500 animate-spin\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        fill=\"none\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <circle\r\n                          className=\"opacity-25\"\r\n                          cx=\"12\"\r\n                          cy=\"12\"\r\n                          r=\"10\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"4\"\r\n                        ></circle>\r\n                        <path\r\n                          className=\"opacity-75\"\r\n                          fill=\"currentColor\"\r\n                          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                        ></path>\r\n                      </svg>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <p className=\"text-center text-sm text-gray-600 dark:text-gray-400\">\r\n          {executing\r\n            ? 'Please confirm transactions in your wallet'\r\n            : 'Processing transactions...'}\r\n        </p>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderCompleteStep = () => {\r\n    if (!executionResults) return null;\r\n    \r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4\">\r\n            <svg\r\n              className=\"h-8 w-8 text-green-600 dark:text-green-400\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"text-xl font-bold text-gray-800 dark:text-white\">\r\n            Strategy Execution Completed\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-2\">\r\n            {executionResults.operations.length} operation{executionResults.operations.length !== 1 ? 's' : ''} completed successfully.\r\n            {executionResults.failedOperations.length > 0 && \r\n              ` ${executionResults.failedOperations.length} operation${executionResults.failedOperations.length !== 1 ? 's' : ''} failed.`\r\n            }\r\n          </p>\r\n        </div>\r\n\r\n        {executionResults.failedOperations.length > 0 && (\r\n          <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-4 text-sm text-yellow-800 dark:text-yellow-200\">\r\n            <div className=\"flex\">\r\n              <svg\r\n                className=\"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0\"\r\n                fill=\"currentColor\"\r\n                viewBox=\"0 0 20 20\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\r\n                  clipRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n              <div>\r\n                <p>Some operations failed to execute. You may want to try them again later.</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded p-4\">\r\n          <h4 className=\"font-medium text-green-800 dark:text-green-200 mb-2\">\r\n            Your portfolio has been optimized\r\n          </h4>\r\n          <p className=\"text-green-700 dark:text-green-300 text-sm\">\r\n            Your assets are now allocated according to the recommended strategy.\r\n            CompounDefi will continue to monitor market conditions and suggest adjustments when needed.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <Button variant=\"primary\" onClick={onComplete}>\r\n            View Updated Portfolio\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderErrorStep = () => {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 mb-4\">\r\n            <svg\r\n              className=\"h-8 w-8 text-red-600 dark:text-red-400\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"text-xl font-bold text-gray-800 dark:text-white\">\r\n            Strategy Execution Failed\r\n          </h3>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mt-2\">\r\n            {statusMessage || 'There was an error executing the strategy.'}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-4 text-sm text-red-800 dark:text-red-200\">\r\n          <div className=\"flex\">\r\n            <svg\r\n              className=\"h-5 w-5 text-red-400 mr-2 flex-shrink-0\"\r\n              fill=\"currentColor\"\r\n              viewBox=\"0 0 20 20\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <div>\r\n              <p>The execution was interrupted or failed to complete. Possible reasons:</p>\r\n              <ul className=\"list-disc pl-5 mt-1 space-y-1\">\r\n                <li>Transaction rejected in wallet</li>\r\n                <li>Insufficient balance for gas fees</li>\r\n                <li>Network congestion or timeout</li>\r\n                <li>Contract execution error</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-center space-x-4\">\r\n          <Button variant=\"outline\" onClick={handleCancel}>\r\n            Back to Recommendations\r\n          </Button>\r\n          <Button\r\n            variant=\"primary\"\r\n            onClick={() => {\r\n              setStep('confirm');\r\n              setConfirmDisabled(false);\r\n              setProgress(0);\r\n              setStatusMessage('Preparing transactions...');\r\n            }}\r\n          >\r\n            Try Again\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 max-w-3xl w-full\">\r\n      {step === 'confirm' && renderConfirmStep()}\r\n      {step === 'executing' && renderExecutingStep()}\r\n      {step === 'complete' && renderCompleteStep()}\r\n      {step === 'error' && renderErrorStep()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExecutionFlow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}